<!doctype html>
<html class="no-js" lang="">

<head>
	<meta charset="utf-8">
	<title>James R. Williams | jamesrwilliams.github.io</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<meta property="og:title" content="">
	<meta property="og:type" content="">
	<meta property="og:url" content="">
	<meta property="og:image" content="">

	<link rel="manifest" href="site.webmanifest">
	<link rel="apple-touch-icon" href="icon.png">
	<link rel="stylesheet" href="css/main.css">

	<meta name="theme-color" content="#fafafa">
</head>

<body class="no-js">

	<header>
		<h1>James R. Williams on GitHub</h1>
		<p>I'm a full-stack web developer based in Toronto, who enjoys building delightfully fast, easy to use, and engaging digital projects. Here are my most recent GitHub projects:</p>
	</header>

	<main>

		<h2>Active projects</h2>

		<ul id="projects-active">
			<li class="error-loading">Loading some projects from GitHub...</li>
		</ul>

		<h2>Archived projects</h2>

		<ul id="projects-archived">
			<li class="error-loading">Loading some projects from GitHub...</li>
		</ul>

	</main>

	<script>

      document.addEventListener("DOMContentLoaded", (event) => {

        const $activeProjectsList = document.getElementById('projects-active');
        const $archivedProjectsList = document.getElementById('projects-archived');

        fetch("https://api.github.com/users/jamesrwilliams/repos")
          .then(function (response) {
            return response.json();
          })
          .then(function (myJson) {

            myJson.forEach((project) => {
              if(!project.fork) {
                addToPage(project.archived, project);
              }
            });

            setTimeout(function () {
              document.body.classList.remove('no-js');
            }, 500);

          })
          .catch(function (error) {
            console.log("Error: " + error);
          });

        function addToPage(archived = true, project) {

          console.log(project);

          let destinationElement = (archived ? $archivedProjectsList : $activeProjectsList );

          let $projectEntry = document.createElement('li');

          if(archived) {

            let date = new Date(project.pushed_at);
            let formatted_date = date.getFullYear() + '-' + (date.getMonth() < 9 ? '0' : '') + (date.getMonth() + 1) + '-' + (date.getDate() < 10 ? '0' + date.getDate() : date.getDate() );

            $projectEntry.innerHTML = `<time datetime="${date}">${formatted_date}</time> <a href="${project.html_url}">${project.full_name}</a>
 <span class="project-language">${( project.language ? project.language : '' )}</span>`;
          } else {
            let heading = `<h3 class="project-full_name"><a href="${project.html_url}" target="_blank">${project.full_name}</a></h3>`;
            let description = `<span class="project-description">${project.description}</span>`;

            $projectEntry.innerHTML = heading + description;
          }

          destinationElement.append($projectEntry);

        }

      });

	</script>

	<script>
	  window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
	  ga('create', 'UA-XXXXX-Y', 'auto'); ga('set', 'anonymizeIp', true); ga('set', 'transport', 'beacon'); ga('send', 'pageview')
	</script>
	<script src="https://www.google-analytics.com/analytics.js" async></script>
</body>

</html>
